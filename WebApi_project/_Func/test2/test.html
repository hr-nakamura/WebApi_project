<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title></title>

    <script language="JavaScript" type="text/javascript">
    window.onload = function () {
        alert("onload");
        }
        function add() {
            // 返却値用を作成する
            var ret = new Array();

            // チェック状態の取得
            var selectCheck = document.forms[1].selection.checked;
            // 名前が選択されているか
            if (document.forms[1].selection.length) {
                // 選択項目が複数ある
                // チェック状態をfalseに設定
                selectCheck = false;
                // 個数分ループ
                var retCount = 0;
                for (i = 0; i < document.forms[1].selection.length; i++) {
                    // 選択されているかチェック
                    if (document.forms[1].selection[i].checked) {
                        // 選択されていればその状態を取得する
                        selectCheck = true;
                        ret[retCount] = new Array();
                        ret[retCount][0] = document.forms[1].test0[i].value;
                        ret[retCount][1] = document.forms[1].test1[i].value;
                        ret[retCount][2] = document.forms[1].test2[i].value;

                        //*****jQuery用に追加した処理（親画面に返却する値）********************
                        document.forms[1].selectSei.value = ret[0][1];
                        document.forms[1].selectMei.value = ret[0][2];
                        //*****jQuery用に追加した処理（親画面に返却する値）********************

                        retCount++;
                    }
                }
            } else {
                // 選択項目が1つしかない
                ret[0] = new Array();
                ret[0][0] = document.forms[1].test0.value;
                ret[0][1] = document.forms[1].test1.value;
                ret[0][2] = document.forms[1].test2.value;

                //*****jQuery用に追加した処理（親画面に返却する値）********************
                document.forms[1].selectSei.value = ret[0][1];
                document.forms[1].selectMei.value = ret[0][2];
                //*****jQuery用に追加した処理（親画面に返却する値）********************
            }

            // 選択されていたかチェック
            if (!selectCheck) {
                // メッセージを表示
                alert("追加したいデータを選択してください。");
                return;
            }
        }

    </script>
    </head>
<body class="test">
    <html:form action="BBB" method="post" onsubmit="return func()">
        <input type="hidden" name="action" value="">
        <input type="hidden" name="selectSei" value="">
        <input type="hidden" name="selectMei" value="">

        <table class="bgtable" cellSpacing="1" cellPadding="3" width="100%">
            <TR class="tablehead" align="center">
                <TD width="10%">選択</TD>
                <TD width="45%">姓</TD>
                <TD width="45%">名</TD>
            </TR>

            <logic:iterate id="dataBean" property="list" name="BBBForm" indexId="index" type="BBBBean">
                <html:hidden property="test0" name="dataBean" />
                <html:hidden property="test1" name="dataBean" />
                <html:hidden property="test2" name="dataBean" />

                <TR class="tabletext" align="center">
                    <TD>
                        <logic:equal name="BBBForm" property="maxSelection" value="1">
                            <!--maxSelectionが"1"だったら「選択」をラジオボタンにする-->
                            <html:radio property="selection" value="<%=dataBean.getKeycd()%>" />
                        </logic:equal>
                        <logic:notEqual name="BBBForm" property="maxSelection" value="1">
                            <!--maxSelectionが"1"以外だったら「選択」をチェックボックスにする-->
                            <html:checkbox property="selection" value="<%=dataBean.getKeycd()%>" />
                        </logic:notEqual>
                    </TD>
                    <TD>
                        <bean:write property="namae_Sei" name="dataBean" />
                    </TD>
                    <TD>
                        <bean:write property="namae_Mei" name="dataBean" />
                    </TD>
                </TR>
            </logic:iterate>
        </table>

    </html:form>
</body>

</html>