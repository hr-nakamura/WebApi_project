<!DOCTYPE html>
<html>
<head>
    <META http-equiv="Content-Type" content="text/html; charset=SHIFT_JIS">
    <title></title>
    <script src="../Scripts/jquery-1.9.1.min.js" type="text/javascript"></script>
    <script src="../Scripts/jquery.kansa.Query.js" type="text/javascript"></script>
    <script src="../debug/jquery.my.debug.js" type="text/javascript"></script>

    <script type="text/javascript">
        var local_top;
        $(window).on("load", function () {
            try {
                $.debug("Start debug_window.html");
                local_top = $window.top;
                var xx = (window == window.parent ? "[open]で呼ばれた" : "[ifream]で呼ばれた");
                $.debug("debug_window.html[" + xx + "]");
                var closeMode = (!local_top.debugWin || local_top.debugWin.closed);
                $.debug("[" + closeMode + "]");

            } catch (e) {
                alert(e.message);
            }

        });
        function resize() {
            var h = $(window).height();
            //top.debugWin.appendTextarea(h.toString());
            $("textarea.debug").css("height", h - 16);
        }
    </script>
    <script type="text/javascript">
        $(function () {
            $(window).resize(function (elem) {
                $("textarea.debug").appendTextarea("resize");
                resize();
            });
        });
    </script>
    <script type="text/javascript">
        function appendTextarea(msg) {
            $.debug("appendTextarea", msg);
            $("textarea.debug").appendTextarea(msg);
        }
    </script>
    <script type="text/javascript">
        ; (function ($) {
            $.fn.focusToEnd = function () {
                $("textarea.debug")[0].focus();
                $("textarea.debug")[0].scrollTop = $("textarea.debug")[0].scrollHeight;
            };
            $.fn.appendTextarea = function (value) {
                //var o = $("textarea.debug");
                var o = $(this);
                var work = $(o).val();
                work += (work == "" ? value : "\n" + value);
                $(o).val(work);

                $(o)[0].focus();
                $(o)[0].scrollTop = $(o)[0].scrollHeight;
            };
            $window = {
                get top() {
                    //var mode = (window == window.parent ? "[open]で呼ばれた" : "[ifream]で呼ばれた");
                    //var pname = wimdow.location.pathname;
                    //$.debug("$window", pname, mode);

                    var o = window.top;
                    while ((o.opener != null && o.opener)) {
                        $.debug(typeof (o.opener));
                        o = o.opener.top;
                    }
                    return (o.top);
                }
            }
        })(jQuery);
        function copy_to_clipboard(value) {
            if (navigator.clipboard) {
                var copyText = value;
                navigator.clipboard.writeText(copyText).then(function () {
                    alert('クリップボードにコピーしました。');
                });
            } else {
                alert('対応していません。');
            }
        }
        function mouse_over() {
            $("textarea.debug").appendTextarea("ABCDEF");
        }
    </script>
    <style>
        .debug {
            width: 100%;
            height: 100%;
        }
    </style>
</head>
<body>
<textarea class="debug" readonly></textarea>
</body>
</html >
