<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title></title>
    <script src="Scripts/jquery-1.9.1.min.js" type="text/javascript"></script>

    <script src="Scripts/json2.js" type="text/javascript"></script>
    <script src="Scripts/jquery.my.webapi.js" type="text/javascript"></script>
    <script src="Scripts/jquery.kansa.Query.js" type="text/javascript"></script>
    <script src="debug/jquery.my.debug.js" type="text/javascript"></script>

    <!-- menu -->
    <script src="Scripts/jquery.my.frame.js" type="text/javascript"></script>
    <!-- menu -->
    <link href="Scripts/my.mnmenu.css" rel="stylesheet" type="text/css" />
    <script src="Scripts/jquery.my.mymenu.js" type="text/javascript"></script>
    <script src="Scripts/jquery.my.mnmenu.js" type="text/javascript"></script>

    <script type="text/javascript">
        (function ($) {
        })(jQuery);
    </script>

    <script type="text/javascript">
        var debug_mode = true;
        var superfish;
        var user_mode = "json";
        var WebApi_url = "/WebApi/project/api/xml";
        var WebApi_url_json = "/WebApi/project/api/json";
        var mailPara = {
            mailAddr: "azuma@psl-em.co.jp"
        };
        var Send_Option = {
        };

    </script>

    <script type="text/javascript">
        $(window).on("load", function () {
            try {

                $.alert("XX", $.fn.jquery, window.location);
                $(".user_mode[value='" + user_mode + "']").click();


                //alert("X");
                var hostName = (window.location.hostname == "localhost" ? "" : "http://" + window.location.hostname);
                var work = window.location.pathname.split("/");
                var path_name = "".concat("/", work[1]);
                //hostName = "http://kansa.in.eandm.co.jp";
                WebApi_url = hostName + path_name + "/project/api/xml";
                WebApi_url_json = hostName + path_name + "/project/api/json";
                WebApi_url_test = hostName + path_name + "/project/api/test";
                WebApi_url_xml = hostName + path_name + "/project/api/xml";

                //var xmlDoc = $.WebApi_get(WebApi_url_xml);
                //var x = $.xml2str(xmlDoc);

                //$.alert.json(memberInfo);
                //var memberInfo = $.WebApi_json( "GET",WebApi_url_json, "projectInfo/json_memberInfo",mailPara);
                //            $.alert.json(memberInfo);

                // methodListの取得
                var methodList = $.WebApi("GET", WebApi_url);
                var menu_Xml = methodList;

                var menu_data = $.loadXMLDoc("menu.xml");

                menu_Xml = join_menuData(menu_Xml, menu_data);

                $(".menuBlock_content").mymenu(menu_Xml, {
                    color_menu_base: "cornflowerblue",
                    color_menu_select: "royalblue",
                    click: menu_click
                });
                $("iframe.iframe_content").frame();

                //user_mode = $(".user_mode:checked").val();
            } catch (e) {
                alert(e.message);
            }
        });
        $(function () {

        });
        window.onload1 = function () {
            $.debug("StartXX");
            $(".user_mode[value='" + user_mode + "']").click();

            var hostName = (window.location.hostname == "localhost" ? "" : "http://" + window.location.hostname);
            var x = window.location.pathname.split("/");
            //hostName = "http://kansa.in.eandm.co.jp";
            WebApi_url = hostName + "/WebApi/project/api/xml";
            WebApi_url_json = hostName + "/WebApi/project/api/json";
            WebApi_url_test = hostName + "/WebApi/project/api/test";
            WebApi_url_xml = hostName + "/WebApi/project/api/xml";

            //var xmlDoc = $.WebApi_get(WebApi_url_xml);
            //var x = $.xml2str(xmlDoc);

            //$.alert.json(memberInfo);
            //var memberInfo = $.WebApi_json( "GET",WebApi_url_json, "projectInfo/json_memberInfo",mailPara);
            //            $.alert.json(memberInfo);

            // methodListの取得
            var methodList = $.WebApi("GET", WebApi_url);
            var menu_Xml = methodList;

            var menu_data = $.loadXMLDoc("menu.xml");

            menu_Xml = join_menuData(menu_Xml, menu_data);

            $(".menuBlock_content").mymenu(menu_Xml, {
                color_menu_base: "cornflowerblue",
                color_menu_select: "royalblue",
                click: menu_click
            });
            $("iframe.iframe_content").frame();

            //user_mode = $(".user_mode:checked").val();
            //alert(user_mode);
        }
        function join_menuData(menu_xml, menu_xml2) {
            var root = $(menu_xml).find("root");
            var menu = $(menu_xml2).find("root>menu");
            root.prepend(menu);
            return (menu_xml);
        }
    </script>
    <script>
        $(function () {
            $(window).on("resize", function () {
                var a = 1;
            });
        });

    </script>
    <script type="text/javascript">
        function menu_click(o) {
            var mode = o.mode;
            var item = o.item;
            var func = o.func;
            if (mode == "method") {
                //Send_Option.visitBBS = "2019/07/01 10:10:00";
                //Send_Option.limitYear = "2019";

                if (user_mode == "json") {
                    var value = item + "/json_" + func;
                    var Str = $.WebApi_json("GET", WebApi_url_json, value, Send_Option);
                    //$.alert.json(Str);
                    $.storage("viewStr", JSON.stringify(Str, null, 2));
                    $("iframe.iframe_content").attr("src", "Util/viewValue.html");
                }
                else {
                    var value = item + "/" + func;
                    var xmlDoc = $.WebApi("GET", WebApi_url, value, Send_Option);
                    var Str = $.xml2str(xmlDoc);
                    //StrOut(Str);
                    $.storage("viewStr", Str);
                    $("iframe.iframe_content").attr("src", "Util/viewValue.html");
                }
            }
            else if (mode == "url") {
                var value = o.value;
                $("iframe.iframe_content").attr("src", value);
            }
        }
    </script>
    <script type="text/javascript">
        $(function () {
            $(".user_mode").on("click", function () {
                user_mode = this.value;
            });

        });
        function StrOut(xmlStr) {
            if ($.isJSON(xmlStr)) {
                var work = JSON.stringify(xmlStr, null, 2);
                $.alert("結果【JSON】", work);
            }
            else {
                var xmlDoc = $.str2xml(xmlStr);
                var err = $(xmlDoc).selectSingleNode("error");
                if (err != null && err.childNodes.length > 0) {
                    $.alert("＝＝　エラー　＝＝", err.childNodes[0].text);
                }
                else {
                    $.alert("結果【XML】", xmlStr);
                    var a = 1;
                    //$("data", xmlStr).each(function (i, elem) {
                    //    //$.debug(elem.id, $(elem).attr("class"), $(elem).text());
                    //    var a = 1;
                    //})
                }
            }
        }

    </script>
    <style>
        body {
            *font-family: Arial;
            overflow: hidden;
            padding: 0;
            border: 0px solid green;
            margin: 0px 0px 0px 0px;
            background-color: snow;
        }

        .iframe_content {
            vertical-align: top;
            width: 100%;
            *height: 100%;
            border: 1px solid green;
            background-color: snow;
        }

        .menuBlock_X {
            background-color: cornflowerblue;
            width: 100%;
            white-space: nowrap;
            border: 0px solid red;
            padding: 0;
        }

        .logoBase {
            background-color: cornflowerblue;
            width: 1%;
            border: 0px solid red;
            height: 32px;
        }

        .menuBase {
            width: 90%;
            vertical-align: middle;
        }

        .topBar {
            background-color: cornflowerblue;
            border-collapse: collapse;
            width: 100%;
            white-space: nowrap;
            padding: 0;
            border: 0px solid red;
        }

        .EMG_Logo {
            height: 30px;
            vertical-align: middle;
        }

        .EMG_Logo-toggle {
            height: 30px;
            vertical-align: middle;
            opacity: 0.6;
            *transform: translateX(10.0rem);
        }
    </style>

</head>
<body>
    <table>
        <tbody>
            <tr>
                <td>
                    <input type="radio" class="user_mode" name="user_mode" value="json">Json
                    <input type="radio" class="user_mode" name="user_mode" value="xml" checked>XML

                </td>
            </tr>
        </tbody>
    </table>
    <div class="drawer">
        <main role="main">
            <div class="menuBlock">
                <table class="topBar">
                    <tr>
                        <td class="logoBase drawer-toggle">
                            <img class="EMG_Logo" src="images/EM.png" />
                        </td>
                        <td class="menuBase">
                            <div class="menuBlock_content"></div>
                        </td>
                    </tr>
                </table>
            </div>
        </main>
    </div>
    <iframe class="iframe_content"></iframe>
</body>


</html>
